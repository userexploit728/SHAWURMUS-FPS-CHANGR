-- Roblox FPS Cap Changer
-- This script allows you to change your FPS cap in Roblox

local UserInputService = game:GetService("UserInputService")
local RunService = game:GetService("RunService")
local Players = game:GetService("Players")
local Player = Players.LocalPlayer
local StarterGui = game:GetService("StarterGui")

-- GUI for FPS Cap Changer
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "FPSCapChanger"
ScreenGui.ResetOnSpawn = false
ScreenGui.Parent = Player:WaitForChild("PlayerGui")

-- Main Frame
local MainFrame = Instance.new("Frame")
MainFrame.Name = "MainFrame"
MainFrame.Size = UDim2.new(0, 200, 0, 150)
MainFrame.Position = UDim2.new(0.5, -100, 0.5, -75)
MainFrame.BackgroundColor3 = Color3.fromRGB(45, 45, 45)
MainFrame.BorderSizePixel = 0
MainFrame.Active = true
MainFrame.Draggable = true
MainFrame.Parent = ScreenGui

-- Title
local Title = Instance.new("TextLabel")
Title.Name = "Title"
Title.Size = UDim2.new(1, 0, 0, 30)
Title.BackgroundColor3 = Color3.fromRGB(35, 35, 35)
Title.BorderSizePixel = 0
Title.Text = "FPS Cap Changer"
Title.TextColor3 = Color3.fromRGB(255, 255, 255)
Title.TextSize = 18
Title.Font = Enum.Font.SourceSansBold
Title.Parent = MainFrame

-- FPS Input Box
local FPSInput = Instance.new("TextBox")
FPSInput.Name = "FPSInput"
FPSInput.Size = UDim2.new(0.8, 0, 0, 30)
FPSInput.Position = UDim2.new(0.1, 0, 0.3, 0)
FPSInput.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
FPSInput.BorderColor3 = Color3.fromRGB(100, 100, 100)
FPSInput.Text = "60"
FPSInput.TextColor3 = Color3.fromRGB(255, 255, 255)
FPSInput.TextSize = 16
FPSInput.Font = Enum.Font.SourceSans
FPSInput.PlaceholderText = "Enter FPS Cap"
FPSInput.Parent = MainFrame

-- Apply Button
local ApplyButton = Instance.new("TextButton")
ApplyButton.Name = "ApplyButton"
ApplyButton.Size = UDim2.new(0.8, 0, 0, 30)
ApplyButton.Position = UDim2.new(0.1, 0, 0.55, 0)
ApplyButton.BackgroundColor3 = Color3.fromRGB(0, 120, 215)
ApplyButton.BorderSizePixel = 0
ApplyButton.Text = "Apply FPS Cap"
ApplyButton.TextColor3 = Color3.fromRGB(255, 255, 255)
ApplyButton.TextSize = 16
ApplyButton.Font = Enum.Font.SourceSansBold
ApplyButton.Parent = MainFrame

-- Current FPS Display
local FPSDisplay = Instance.new("TextLabel")
FPSDisplay.Name = "FPSDisplay"
FPSDisplay.Size = UDim2.new(0.8, 0, 0, 20)
FPSDisplay.Position = UDim2.new(0.1, 0, 0.8, 0)
FPSDisplay.BackgroundTransparency = 1
FPSDisplay.Text = "Current FPS: 60"
FPSDisplay.TextColor3 = Color3.fromRGB(255, 255, 255)
FPSDisplay.TextSize = 14
FPSDisplay.Font = Enum.Font.SourceSans
FPSDisplay.Parent = MainFrame

-- Variables
local targetFPS = 60
local lastUpdate = tick()
local frameCount = 0
local currentFPS = 60
local setFPSCapFunction

-- Check if setfpscap function exists (for different executors)
if setfpscap then
    setFPSCapFunction = setfpscap
elseif set_fps_cap then
    setFPSCapFunction = set_fps_cap
else
    -- Fallback if executor doesn't support fps cap changing
    ApplyButton.Text = "Unsupported Executor"
    ApplyButton.BackgroundColor3 = Color3.fromRGB(150, 0, 0)
    setFPSCapFunction = function() end
    
    -- Show notification
    StarterGui:SetCore("SendNotification", {
        Title = "FPS Cap Changer";
        Text = "Your executor doesn't support changing FPS cap";
        Duration = 5;
    })
end

-- Apply the FPS cap
ApplyButton.MouseButton1Click:Connect(function()
    local newFPS = tonumber(FPSInput.Text)
    if newFPS and newFPS > 0 then
        targetFPS = newFPS
        setFPSCapFunction(targetFPS)
        
        -- Show notification
        StarterGui:SetCore("SendNotification", {
            Title = "FPS Cap Changed";
            Text = "Set to " .. tostring(targetFPS) .. " FPS";
            Duration = 3;
        })
    else
        -- Invalid input
        FPSInput.Text = tostring(targetFPS)
        
        -- Show error notification
        StarterGui:SetCore("SendNotification", {
            Title = "Invalid Input";
            Text = "Please enter a positive number";
            Duration = 3;
        })
    end
end)

-- FPS Counter
RunService.RenderStepped:Connect(function()
    frameCount = frameCount + 1
    
    local now = tick()
    local elapsed = now - lastUpdate
    
    if elapsed >= 1 then
        currentFPS = math.floor(frameCount / elapsed)
        FPSDisplay.Text = "Current FPS: " .. tostring(currentFPS)
        
        frameCount = 0
        lastUpdate = now
    end
end)

-- Apply initial FPS cap
setFPSCapFunction(targetFPS)

-- Keybind to toggle GUI visibility (Right Control)
UserInputService.InputBegan:Connect(function(input, gameProcessed)
    if not gameProcessed and input.KeyCode == Enum.KeyCode.RightControl then
        MainFrame.Visible = not MainFrame.Visible
    end
end)

-- Instructions
print("FPS Cap Changer loaded!")
print("Use Right Control to toggle the GUI visibility")
print("Enter the desired FPS in the input box and click Apply")
